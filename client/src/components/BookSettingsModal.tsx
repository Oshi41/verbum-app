import React, {useState, FC} from "react";
import styled from "styled-components";
import BookService from "../services/BookService";

interface BookSettingsModalProps {
    active: boolean
    setActive: any
    bookId: number | undefined
    bookPath: string | undefined
}
interface BookSettingsBlockStyleProps {
    active: boolean
}

const BookSettingsBlock = styled.div<BookSettingsBlockStyleProps>`
  z-index: 100;
  background-color: ${(props) => props.theme.main};
  padding: 5px 5px 3px 13px;
  width: 150px;
  border-radius: 5px;
  position: absolute;
  right: 0;
  bottom: 0;
  box-shadow: 0 0 6px rgba(0,0,0,0.2);
  display: none;
  flex-direction: column;
  ${({ active }) => active && `
    display: flex;
  `}
`;
const CloseButton = styled.button`
  margin-left: auto;
  margin-bottom: 10px;
  padding: 0;
  border-radius: 100%;
  border: none;
  width: 20px;
  height: 20px;
  background: none;
  cursor: pointer;  
  svg {
    path {
      fill: ${(props) => props.theme.utility};
      transition: 0.1s;
    }
    &:hover {
        path {
          fill: ${(props) => props.theme.secondary};
        }
    }
  }
`;
const BookSettingsList = styled.ul`
  list-style: none;
  padding: 0;
  margin: 0;
`;
const SettingsEl = styled.li`
  margin-bottom: 10px;
  span {
    font-size: 14px;
  }
`;
export const SettingsButton = styled.button`
  padding: 0;
  background: none;
  border: none;
  border-radius: 5px;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: .1s;
  span {
    color: ${(props) => props.theme.secondary};
    font-size: 16px;
    margin-left: 10px;
  }
  &:hover {
    background: ${(props) => props.theme.border};
  }
`;

const BookSettingsModal: FC<BookSettingsModalProps> = ({active, setActive, bookId, bookPath}) => {

    const hideModal = () => {
        setActive(false);
    };
    const removeBook = async (bookId: number | undefined) => {
        try {
            window.location.reload();
            await BookService.removeBook(bookId);
        } catch (e) {
            console.log(e);
        }
    }

    return (
        <BookSettingsBlock active={active}>
            <CloseButton onClick={hideModal}>
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.75 0C11.0706 0 13.2962 0.921872 14.9372 2.56282C16.5781 4.20376 17.5 6.42936 17.5 8.75C17.5 11.0706 16.5781 13.2962 14.9372 14.9372C13.2962 16.5781 11.0706 17.5 8.75 17.5C6.42936 17.5 4.20376 16.5781 2.56282 14.9372C0.921872 13.2962 0 11.0706 0 8.75C0 6.42936 0.921872 4.20376 2.56282 2.56282C4.20376 0.921872 6.42936 0 8.75 0V0ZM8.75 7.68875L6.7175 5.65625C6.57677 5.51552 6.3859 5.43646 6.18688 5.43646C5.98785 5.43646 5.79698 5.51552 5.65625 5.65625C5.51552 5.79698 5.43646 5.98785 5.43646 6.18688C5.43646 6.3859 5.51552 6.57677 5.65625 6.7175L7.68875 8.75L5.65625 10.7825C5.58657 10.8522 5.53129 10.9349 5.49358 11.026C5.45587 11.117 5.43646 11.2146 5.43646 11.3131C5.43646 11.4117 5.45587 11.5093 5.49358 11.6003C5.53129 11.6913 5.58657 11.7741 5.65625 11.8438C5.72593 11.9134 5.80866 11.9687 5.8997 12.0064C5.99075 12.0441 6.08833 12.0635 6.18688 12.0635C6.28542 12.0635 6.383 12.0441 6.47405 12.0064C6.56509 11.9687 6.64782 11.9134 6.7175 11.8438L8.75 9.81125L10.7825 11.8438C10.8522 11.9134 10.9349 11.9687 11.026 12.0064C11.117 12.0441 11.2146 12.0635 11.3131 12.0635C11.4117 12.0635 11.5093 12.0441 11.6003 12.0064C11.6913 11.9687 11.7741 11.9134 11.8438 11.8438C11.9134 11.7741 11.9687 11.6913 12.0064 11.6003C12.0441 11.5093 12.0635 11.4117 12.0635 11.3131C12.0635 11.2146 12.0441 11.117 12.0064 11.026C11.9687 10.9349 11.9134 10.8522 11.8438 10.7825L9.81125 8.75L11.8438 6.7175C11.9134 6.64782 11.9687 6.56509 12.0064 6.47405C12.0441 6.383 12.0635 6.28542 12.0635 6.18688C12.0635 6.08833 12.0441 5.99075 12.0064 5.8997C11.9687 5.80866 11.9134 5.72593 11.8438 5.65625C11.7741 5.58657 11.6913 5.53129 11.6003 5.49358C11.5093 5.45587 11.4117 5.43646 11.3131 5.43646C11.2146 5.43646 11.117 5.45587 11.026 5.49358C10.9349 5.53129 10.8522 5.58657 10.7825 5.65625L8.75 7.68875Z"
                    />
                </svg>
            </CloseButton>
            <BookSettingsList>
                {/*<SettingsEl>*/}
                {/*    <SettingsButton>*/}
                {/*        <svg width="13" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">*/}
                {/*            <path d="M9.1344 0.626955C9.04148 0.438756 8.89777 0.280303 8.71951 0.169509C8.54124 0.0587156 8.33554 0 8.12565 0C7.91577 0 7.71006 0.0587156 7.5318 0.169509C7.35354 0.280303 7.20982 0.438756 7.1169 0.626955L5.21565 4.47946L0.964403 5.09821C0.756575 5.12818 0.561283 5.21572 0.400624 5.35093C0.239965 5.48613 0.120351 5.6636 0.0553174 5.86325C-0.00971664 6.06291 -0.0175755 6.27678 0.0326298 6.48067C0.0828351 6.68456 0.189101 6.87032 0.339403 7.01696L3.4169 10.0157L2.69065 14.2495C2.65508 14.4564 2.67813 14.6692 2.7572 14.8637C2.83627 15.0582 2.9682 15.2267 3.13807 15.3502C3.30794 15.4736 3.50896 15.547 3.7184 15.5621C3.92783 15.5773 4.13732 15.5335 4.32315 15.4357L5.46065 14.837C5.2352 14.4857 5.04232 14.1146 4.8844 13.7282L3.96565 14.212L4.6594 10.162C4.69045 9.98219 4.67731 9.79758 4.62113 9.62402C4.56495 9.45046 4.4674 9.29317 4.3369 9.16571L1.3944 6.29821L5.46065 5.70696C5.64097 5.68065 5.8122 5.61093 5.95961 5.5038C6.10702 5.39667 6.2262 5.25534 6.3069 5.09196L8.12565 1.40821L9.6244 4.4432C10.0512 4.3401 10.487 4.27815 10.9257 4.25821L9.1344 0.625705V0.626955ZM4.3744 11.1257V10.997V11.2532V11.1257ZM16.8744 11.1257C16.8744 11.8644 16.7289 12.5958 16.4462 13.2783C16.1635 13.9608 15.7492 14.5809 15.2269 15.1032C14.7045 15.6255 14.0845 16.0398 13.402 16.3225C12.7195 16.6052 11.9881 16.7507 11.2494 16.7507C10.5107 16.7507 9.77927 16.6052 9.09681 16.3225C8.41435 16.0398 7.79426 15.6255 7.27193 15.1032C6.7496 14.5809 6.33526 13.9608 6.05258 13.2783C5.7699 12.5958 5.6244 11.8644 5.6244 11.1257C5.6244 9.63386 6.21704 8.20312 7.27193 7.14823C8.32682 6.09334 9.75756 5.50071 11.2494 5.50071C12.7412 5.50071 14.172 6.09334 15.2269 7.14823C16.2818 8.20312 16.8744 9.63386 16.8744 11.1257V11.1257ZM11.8744 8.62571C11.8744 8.45994 11.8086 8.30097 11.6913 8.18376C11.5741 8.06655 11.4152 8.00071 11.2494 8.00071C11.0836 8.00071 10.9247 8.06655 10.8075 8.18376C10.6903 8.30097 10.6244 8.45994 10.6244 8.62571V10.5007H8.7494C8.58364 10.5007 8.42467 10.5666 8.30746 10.6838C8.19025 10.801 8.1244 10.9599 8.1244 11.1257C8.1244 11.2915 8.19025 11.4504 8.30746 11.5676C8.42467 11.6849 8.58364 11.7507 8.7494 11.7507H10.6244V13.6257C10.6244 13.7915 10.6903 13.9504 10.8075 14.0676C10.9247 14.1849 11.0836 14.2507 11.2494 14.2507C11.4152 14.2507 11.5741 14.1849 11.6913 14.0676C11.8086 13.9504 11.8744 13.7915 11.8744 13.6257V11.7507H13.7494C13.9152 11.7507 14.0741 11.6849 14.1913 11.5676C14.3086 11.4504 14.3744 11.2915 14.3744 11.1257C14.3744 10.9599 14.3086 10.801 14.1913 10.6838C14.0741 10.5666 13.9152 10.5007 13.7494 10.5007H11.8744V8.62571Z"*/}
                {/*                  fill="#C5A45B" />*/}
                {/*        </svg>*/}
                {/*        <span>Want to read</span>*/}
                {/*    </SettingsButton>*/}
                {/*</SettingsEl>*/}
                {/*<SettingsEl>*/}
                {/*   <SettingsButton>*/}
                {/*       <svg width="13" height="18" viewBox="0 0 13 18" fill="none" xmlns="http://www.w3.org/2000/svg">*/}
                {/*           <path d="M0.499588 17.0621C0.499588 16.8134 0.59836 16.575 0.774175 16.3992C0.949991 16.2234 1.18845 16.1246 1.43709 16.1246L12.0621 16.1246C12.3107 16.1246 12.5492 16.2234 12.725 16.3992C12.9008 16.575 12.9996 16.8134 12.9996 17.0621C12.9996 17.3107 12.9008 17.5492 12.725 17.725C12.5492 17.9008 12.3107 17.9996 12.0621 17.9996L1.43709 17.9996C1.18845 17.9996 0.949991 17.9008 0.774175 17.725C0.59836 17.5492 0.499588 17.3107 0.499588 17.0621V17.0621ZM1.39959 6.47459C1.22402 6.2988 1.12541 6.06053 1.12541 5.81209C1.12541 5.56365 1.22402 5.32537 1.39959 5.14959L5.77459 0.774586C5.95037 0.599023 6.18865 0.500411 6.43709 0.500411C6.68553 0.500411 6.92381 0.599023 7.09959 0.774586L11.4746 5.14959C11.5667 5.23541 11.6406 5.33891 11.6918 5.45391C11.7431 5.56891 11.7706 5.69306 11.7728 5.81893C11.775 5.94481 11.7519 6.06985 11.7047 6.18658C11.6576 6.30332 11.5874 6.40936 11.4984 6.49838C11.4094 6.58741 11.3033 6.65759 11.1866 6.70474C11.0698 6.75189 10.9448 6.77505 10.8189 6.77283C10.6931 6.77061 10.5689 6.74305 10.4539 6.69181C10.3389 6.64057 10.2354 6.56669 10.1496 6.47459L7.37459 3.69959L7.37459 13.3121C7.37459 13.5607 7.27582 13.7992 7.1 13.975C6.92418 14.1508 6.68573 14.2496 6.43709 14.2496C6.18845 14.2496 5.94999 14.1508 5.77418 13.975C5.59836 13.7992 5.49959 13.5607 5.49959 13.3121L5.49959 3.69959L2.72459 6.47459C2.54881 6.65015 2.31053 6.74876 2.06209 6.74876C1.81365 6.74876 1.57537 6.65015 1.39959 6.47459V6.47459Z"*/}
                {/*                 fill="#C5A45B"*/}
                {/*           />*/}
                {/*       </svg>*/}
                {/*       <span>Export</span>*/}
                {/*   </SettingsButton>*/}
                {/*</SettingsEl>*/}
                <SettingsEl>
                    <SettingsButton onClick={() => removeBook(bookId)}>
                        <svg width="13" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.375 2.8125H11.875V1.25C11.875 0.560547 11.3145 0 10.625 0H4.375C3.68555 0 3.125 0.560547 3.125 1.25V2.8125H0.625C0.279297 2.8125 0 3.0918 0 3.4375V4.0625C0 4.14844 0.0703125 4.21875 0.15625 4.21875H1.33594L1.81836 14.4336C1.84961 15.0996 2.40039 15.625 3.06641 15.625H11.9336C12.6016 15.625 13.1504 15.1016 13.1816 14.4336L13.6641 4.21875H14.8438C14.9297 4.21875 15 4.14844 15 4.0625V3.4375C15 3.0918 14.7207 2.8125 14.375 2.8125ZM10.4688 2.8125H4.53125V1.40625H10.4688V2.8125Z"
                                  fill="#C5A45B"
                            />
                        </svg>
                        <span>Remove</span>
                    </SettingsButton>
                </SettingsEl>
            </BookSettingsList>
        </BookSettingsBlock>
    );
};

export default BookSettingsModal;
